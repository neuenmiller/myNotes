% core.tex - The foundational preamble for all my documents.
% Handles typography, page layout, colors, graphics, and bibliography.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{thamcore}[My Core LaTeX Preamble]

%----------------------------------------------------------------------------------------
%   DOCUMENT CLASS & ENCODING
%----------------------------------------------------------------------------------------
% Use 'article' for papers, reports, homework. Alternatives: 'report', 'book'.
% The '11pt' option is a good balance of readability on screen and paper.
% \documentclass[11pt, a4paper]{article} % Uncomment in your main file, not here.

\usepackage[utf8]{inputenc} % Allows you to type characters like å, ö, à directly. Absolutely essential.
\usepackage[T1]{fontenc}    % The modern font encoding. Fixes copy-pasting from PDFs and improves hyphenation.

%----------------------------------------------------------------------------------------
%   TYPOGRAPHY & FONTS
%----------------------------------------------------------------------------------------
\usepackage{lmodern}        % A modern, cleaner version of the default Computer Modern font.
\usepackage{csquotes}
\usepackage{babel}          % Manages language-specific rules (e.g., hyphenation).
\usepackage{setspace}       % For line spacing control, e.g., \onehalfspacing or \doublespacing for drafts.
\usepackage[
    activate={true,nocompatibility}, % Enables all typographic refinements
    final,                           % Ensures microtype is active
    tracking=true,                   % Adjusts inter-word spacing
    kerning=true,                    % Adjusts spacing between specific letter pairs
    spacing=true,                    % Adjusts inter-word and inter-sentence spacing
    factor=1100,                     % Stretch limit for justification
    stretch=10,                      % Allowed stretchability
    shrink=10                        % Allowed shrinkability
]{microtype}                         % THE package for professional typography. It subtly adjusts spacing and font scaling
                                     % to make paragraphs look perfect and reduce hyphenation. You will cry without it.
\microtypecontext{spacing=nonfrench}
\usepackage{textcase}       % For commands like \MakeUppercase, \MakeLowercase.

%----------------------------------------------------------------------------------------
%   PAGE LAYOUT & APPEARANCE
%----------------------------------------------------------------------------------------
\usepackage[
    a4paper,            % Or 'letterpaper' for US standard
    top=2.5cm,
    bottom=2.5cm,
    left=2.5cm,
    right=2.5cm,
    headheight=13.6pt   % Required for fancyhdr to work without warnings
]{geometry}             % The easiest and best way to control page margins.

\usepackage{fancyhdr}   % For customizing headers and footers.
\pagestyle{fancy}       % Activates fancy headers/footers.
\fancyhf{}              % Clears all header and footer fields.
\renewcommand{\headrulewidth}{0.4pt} % Adds a rule below the header.
\renewcommand{\footrulewidth}{0.4pt} % Adds a rule above the footer.
\fancyhead[C]{My Document Title} % Example: Centered header
\fancyfoot[C]{\thepage}          % Page number in the center of the footer.
\let\cleardoublepage\clearpage
\usepackage[svgnames]{xcolor} % Provides access to a huge library of colors.

%----------------------------------------------------------------------------------------
%   BIBLIOGRAPHY & CITATIONS
%----------------------------------------------------------------------------------------
% The modern way to do bibliography. More flexible and powerful than BibTeX.
\usepackage[
    backend=biber,      % The backend engine. Biber is modern and supports UTF-8.
    style=numeric,      % Citation style. Alternatives: 'alphabetic', 'authoryear'.
    sorting=none,       % How citations are sorted. 'nyt' = name, year, title.
    citestyle=numeric-comp, % Compresses citation numbers, e.g., [1, 2, 3] becomes [1-3].
    language=english
]{biblatex}
\addbibresource{references.bib} % The name of your .bib file.

%----------------------------------------------------------------------------------------
%   HYPERLINKS & REFERENCES
%----------------------------------------------------------------------------------------
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=NavyBlue,
    citecolor=DarkGreen,
    urlcolor=DarkBlue,
    pdftitle={My Document Title},
    pdfauthor={My Name},
    pdfsubject={Subject},
    pdfkeywords={keyword1, keyword2},
    bookmarksopen=true,
    bookmarksnumbered=true
}

% Must be loaded AFTER hyperref. Makes cross-referencing magical.
% \cref{fig:my_figure} will produce "Figure 1" instead of just "1".
\usepackage[noabbrev]{cleveref}

%----------------------------------------------------------------------------------------
%   COMMON PACKAGES FOR TECHNICAL CONTENT
%----------------------------------------------------------------------------------------
\usepackage{graphicx}       % For including images with \includegraphics.
\usepackage{booktabs}       % For professional-looking tables (\toprule, \midrule, \bottomrule).
\usepackage{amsmath}        % The American Mathematical Society's math package. Essential.
\usepackage{amssymb}        % Provides many extra math symbols.
\usepackage{amsfonts}       % Provides math fonts.
\usepackage{enumitem}       % Gives you full control over lists (itemize, enumerate, description).
\usepackage{siunitx}        % The ONLY way to correctly typeset units and numbers. \SI{2.5e3}{\kilo\gram\per\meter\cubed}.
\sisetup{group-digits=false} 

% For code snippets directly in your LaTeX file.
\usepackage{listings}
\lstset{
  basicstyle=\ttfamily\small,
  commentstyle=\color{DarkGreen},
  keywordstyle=\color{NavyBlue},
  stringstyle=\color{Firebrick},
  showstringspaces=false,
  breaklines=true,
  frame=single,
  numbers=left,
  numberstyle=\tiny\color{gray},
}

% For placeholder text during drafting.
\usepackage{lipsum}